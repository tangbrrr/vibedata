# Merkle Tree Web 可视化工具

这是一个交互式的 Merkle Tree 可视化工具，提供了直观的图形界面来理解和操作 Merkle Tree。

## 功能特性

### 🌐 Web 界面
- **响应式设计**: 支持桌面和移动设备
- **现代化 UI**: 使用 CSS Grid 和 Flexbox 布局
- **深色主题日志**: 类似终端的日志显示
- **实时通知**: 操作结果即时反馈

### 🎨 可视化功能
- **树结构展示**: 清晰显示 Merkle Tree 的层级结构
- **节点类型区分**: 根节点、内部节点、叶子节点使用不同颜色
- **交互式节点**: 点击节点可生成证明或高亮子树
- **悬停提示**: 显示节点详细信息
- **动画效果**: 树构建和更新动画

### 🔧 交互操作
- **添加数据**: 动态添加新数据到树中
- **生成证明**: 为任意数据生成 Merkle Proof
- **验证数据**: 检查数据是否存在于树中
- **证明展示**: 详细显示证明路径和验证步骤
- **树管理**: 刷新、清空、重建树结构

### 📊 实时信息
- **树统计**: 显示深度、叶子节点数量、根哈希
- **数据列表**: 列出所有当前数据
- **操作日志**: 记录所有操作历史
- **性能指标**: 显示证明大小等信息

## 快速开始

### 1. 启动服务器

```bash
# 在项目根目录运行
cd vibedata
go run web/main.go
```

### 2. 访问应用

打开浏览器访问: `http://localhost:8080`

服务器启动后会显示如下信息：
```
🌐 Merkle Tree Web 服务器启动中...
📋 访问地址: http://localhost:8080
🔧 API 接口:
   GET  /api/tree           - 获取树信息
   POST /api/add-data       - 添加数据
   POST /api/generate-proof - 生成证明
   POST /api/verify-proof   - 验证证明
   POST /api/rebuild-tree   - 重建树
   POST /api/verify-data    - 验证数据
```

## 使用指南

### 基本操作

#### 1. 查看默认树
- 应用启动时会自动加载包含4个示例交易的默认树
- 右侧可视化区域显示树的完整结构
- 顶部显示树的基本统计信息

#### 2. 添加数据
- 在左侧控制面板的"数据管理"区域输入新数据
- 点击"添加数据"按钮或按回车键
- 树会自动重新构建并显示动画效果

#### 3. 生成证明
- 方法一：在"Merkle Proof"区域输入要证明的数据
- 方法二：点击数据列表中的钥匙图标
- 方法三：直接点击可视化区域中的叶子节点
- 证明详情会在下方区域显示

#### 4. 验证数据
- 在"验证数据"输入框中输入要检查的数据
- 点击"验证数据"按钮
- 系统会显示该数据是否存在于当前树中

### 高级功能

#### 可视化交互
- **节点悬停**: 鼠标悬停在节点上查看详细信息
- **节点点击**: 点击叶子节点生成证明，点击内部节点高亮子树
- **节点类型**: 
  - 🔴 根节点（红色边框）
  - 🔵 内部节点（蓝色边框）
  - 🟢 叶子节点（绿色边框）
  - 🟡 高亮节点（黄色背景，用于证明路径）

#### 证明详情
- **基本信息**: 叶子索引、叶子哈希、根哈希
- **证明状态**: Valid/Invalid 状态指示
- **证明路径**: 逐步显示验证过程
- **证明大小**: 显示证明数据的字节大小

#### 操作日志
- 实时记录所有操作和结果
- 不同类型的日志使用不同颜色
- 支持清空日志功能
- 自动限制日志条数（最多100条）

## API 接口

### GET /api/tree
获取当前树的完整信息

**响应示例:**
```json
{
  "success": true,
  "message": "获取树信息成功",
  "data": {
    "rootHash": "a30ba95a318d36c4...",
    "leafCount": 4,
    "depth": 3,
    "leaves": [...]
  }
}
```

### POST /api/add-data
添加新数据到树中

**请求体:**
```json
{
  "data": "新的交易数据"
}
```

### POST /api/generate-proof
生成 Merkle Proof

**请求体（根据数据）:**
```json
{
  "data": "要证明的数据"
}
```

**请求体（根据索引）:**
```json
{
  "index": 1
}
```

### POST /api/verify-data
验证数据是否存在

**请求体:**
```json
{
  "data": "要验证的数据"
}
```

## 项目结构

```
web/
├── main.go              # Go 后端服务器
├── templates/
│   └── index.html       # 主页面 HTML
├── static/
│   ├── css/
│   │   └── style.css    # 样式文件
│   └── js/
│       ├── api.js       # API 接口封装
│       ├── visualization.js  # 可视化组件
│       └── app.js       # 主应用逻辑
└── README.md           # 本文档
```

## 技术栈

### 后端
- **Go**: Web 服务器和 API
- **HTTP**: RESTful API 接口
- **JSON**: 数据交换格式

### 前端
- **HTML5**: 语义化标记
- **CSS3**: 现代样式和动画
- **JavaScript ES6+**: 异步编程和模块化
- **Font Awesome**: 图标库

### 特性
- **响应式设计**: 适配各种屏幕尺寸
- **无依赖**: 不使用外部 JavaScript 框架
- **模块化**: 清晰的代码组织结构
- **类型安全**: Go 后端提供类型安全

## 浏览器支持

- Chrome 60+
- Firefox 55+
- Safari 12+
- Edge 79+

## 开发说明

### 自定义样式
编辑 `web/static/css/style.css` 文件来修改界面样式。

### 添加功能
1. 在 `web/main.go` 中添加新的 API 接口
2. 在 `web/static/js/api.js` 中添加对应的客户端方法
3. 在 `web/static/js/app.js` 中实现业务逻辑

### 调试
- 使用浏览器开发者工具查看网络请求
- 查看控制台日志获取详细错误信息
- 使用页面内的日志区域查看操作历史

## 常见问题

**Q: 为什么有些内部节点的哈希值看起来不对？**
A: 为了简化演示，前端使用模拟哈希算法。实际的哈希值应该从后端获取。

**Q: 证明验证失败怎么办？**
A: 确保输入的数据与树中的数据完全一致，包括大小写和标点符号。

**Q: 可以处理多大的数据集？**
A: 当前实现适合演示和教学，大型数据集可能需要优化可视化算法。

## License

MIT License 