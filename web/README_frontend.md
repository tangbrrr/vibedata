# Merkle Tree 可视化工具 - 纯前端版

这是一个完全基于前端技术的 Merkle Tree 交互式可视化工具，无需任何后端服务器即可运行。

## 🚀 特性

### ✨ 纯前端实现
- **无服务器依赖**: 完全基于客户端 JavaScript 实现
- **即开即用**: 直接用浏览器打开 HTML 文件即可使用
- **离线可用**: 除了 Font Awesome 图标外，所有资源都内嵌在页面中
- **轻量级**: 总大小不到 200KB，加载迅速

### 🌐 现代化界面
- **响应式设计**: 完美适配桌面、平板和手机
- **美观的 UI**: 采用现代设计风格和渐变色彩
- **流畅动画**: 树构建和交互时的平滑动画效果
- **直观操作**: 清晰的视觉反馈和用户引导

### 🎯 核心功能
- **实时树构建**: 动态添加数据并实时更新树结构
- **可视化展示**: 清晰展示树的层级结构和节点关系
- **证明生成**: 为任意数据生成 Merkle Proof
- **证明验证**: 验证数据完整性和证明有效性
- **交互式节点**: 点击节点获取详细信息和生成证明
- **操作日志**: 实时记录所有操作和结果

## 📁 文件结构

```
web/
├── index.html              # 独立的完整应用页面
├── static/
│   └── js/
│       ├── merkle-tree.js  # 纯前端 Merkle Tree 核心实现
│       ├── api.js          # 本地 API 接口模拟
│       ├── visualization.js # 可视化组件
│       └── app.js          # 主应用逻辑
└── README_frontend.md      # 本文档
```

## 🛠 技术栈

### 前端技术
- **HTML5**: 语义化标记和现代特性
- **CSS3**: 自定义属性、Flexbox、Grid、动画
- **ES6+ JavaScript**: 类、异步/等待、模块化
- **Font Awesome**: 图标库（CDN）

### 核心算法
- **哈希函数**: 自定义简化哈希算法（适用于演示）
- **二进制树**: Merkle Tree 数据结构实现
- **证明生成**: 从叶子到根的路径证明
- **证明验证**: 重构哈希并验证根节点

## 🚀 快速开始

### 方法一：直接打开文件
1. 下载 `web/index.html` 文件到本地
2. 用任意现代浏览器打开该文件
3. 开始使用 Merkle Tree 可视化工具

### 方法二：本地服务器（推荐）
```bash
# 进入 web 目录
cd web

# 使用 Python 启动简单服务器
python -m http.server 8080
# 或者使用 Node.js
npx serve .

# 访问 http://localhost:8080
```

### 方法三：在线部署
将 `web` 目录部署到任何静态网站托管服务：
- GitHub Pages
- Netlify
- Vercel
- 或任何 Web 服务器

## 📖 使用指南

### 基本操作

#### 1. 查看默认树
- 应用加载时会自动创建包含 4 个示例交易的默认树
- 树结构在右侧可视化区域显示
- 不同类型的节点用不同颜色表示：
  - 🔴 根节点（红色）
  - 🔵 内部节点（蓝色）  
  - 🟢 叶子节点（绿色）

#### 2. 添加数据
- 在左侧"数据管理"区域输入新数据
- 点击"添加数据"或按 Enter 键
- 树会自动重建并显示动画效果
- 数据列表会更新显示所有当前数据

#### 3. 生成证明
有三种方式生成 Merkle Proof：
- **方式一**: 在"Merkle Proof"区域输入数据并点击"生成证明"
- **方式二**: 点击数据列表中任意项的钥匙图标
- **方式三**: 直接点击可视化区域中的叶子节点

证明详情会在下方区域显示，包括：
- 叶子索引和哈希值
- 根哈希值和证明状态
- 详细的证明路径步骤
- 证明大小（字节数）

#### 4. 验证数据
- 在"验证数据"输入框中输入要检查的数据
- 点击"验证数据"按钮
- 系统会显示该数据是否存在于当前树中

#### 5. 树管理
- **刷新树**: 重新加载当前树数据
- **重置数据**: 恢复为默认的 4 个示例交易

### 高级功能

#### 节点交互
- **悬停查看**: 鼠标悬停在节点上查看完整哈希和详细信息
- **点击叶子节点**: 自动生成该数据的证明
- **点击内部节点**: 高亮显示其子树结构

#### 操作日志
- 实时显示所有操作记录
- 不同类型消息用不同颜色区分：
  - 🔵 信息（蓝色）
  - 🟢 成功（绿色）
  - 🔴 错误（红色）
  - 🟡 警告（黄色）
- 支持清空日志功能
- 自动限制最多显示 100 条记录

#### 证明路径展示
- 逐步显示证明验证过程
- 显示每步的哈希值和位置（左/右）
- 实时计算证明大小
- 验证证明的有效性

## 🎨 自定义配置

### 修改默认数据
在 `static/js/api.js` 中修改默认交易数据：

```javascript
// 初始化默认数据
this.merkleTree = new MerkleTree([
    '你的自定义数据 1',
    '你的自定义数据 2',
    '你的自定义数据 3',
    '你的自定义数据 4'
]);
```

### 自定义样式
在 `index.html` 的 `<style>` 标签中修改 CSS 变量：

```css
:root {
    --primary-color: #2563eb;     /* 主色调 */
    --secondary-color: #7c3aed;   /* 次要色调 */
    --success-color: #059669;     /* 成功色 */
    --danger-color: #dc2626;      /* 危险色 */
    /* 更多变量... */
}
```

### 哈希算法
可以在 `static/js/merkle-tree.js` 中替换哈希函数：

```javascript
// 当前使用简化哈希，可替换为真实的 SHA-256
async hash(data) {
    const encoder = new TextEncoder();
    const dataBuffer = encoder.encode(data);
    const hashBuffer = await crypto.subtle.digest('SHA-256', dataBuffer);
    const hashArray = Array.from(new Uint8Array(hashBuffer));
    return hashArray.map(b => b.toString(16).padStart(2, '0')).join('');
}
```

## 🌐 浏览器兼容性

- **Chrome 60+** ✅
- **Firefox 55+** ✅  
- **Safari 12+** ✅
- **Edge 79+** ✅

### 所需特性
- ES6 类和箭头函数
- Async/Await
- CSS Grid 和 Flexbox
- CSS 自定义属性

## 🔧 开发说明

### 代码结构
- `merkle-tree.js`: 核心 Merkle Tree 算法实现
- `api.js`: 本地 API 层，提供统一的数据接口
- `visualization.js`: 可视化渲染和交互逻辑
- `app.js`: 主应用控制器，协调各个组件

### 扩展功能
添加新功能的步骤：
1. 在 `MerkleTree` 类中实现核心逻辑
2. 在 `MerkleTreeAPI` 类中添加对应接口
3. 在 `MerkleTreeApp` 类中实现用户界面逻辑
4. 更新 HTML 模板添加相应的 UI 元素

### 调试技巧
- 打开浏览器开发者工具查看控制台输出
- 使用页面内的操作日志追踪执行流程
- 检查网络面板确认没有外部依赖加载失败

## 📊 性能特点

- **初始加载**: < 1 秒（50KB 压缩后）
- **树构建**: 毫秒级响应（< 100 个节点）
- **证明生成**: 瞬时响应（O(log n) 复杂度）
- **内存占用**: < 10MB（1000 个节点）

## 🔐 安全考虑

⚠️ **重要提示**: 这是一个教育和演示工具

- 使用简化的哈希算法，不适用于生产环境
- 没有加密保护，所有数据在客户端明文处理
- 适用于学习 Merkle Tree 概念，不适用于安全敏感场景

## 🎓 教育价值

这个工具特别适合用于：
- 区块链和密码学课程教学
- Merkle Tree 概念的可视化演示
- 数据完整性验证的原理学习
- 前端开发技术的实践案例

## 🤝 贡献指南

欢迎提交改进建议：
1. Fork 项目
2. 创建特性分支
3. 提交更改
4. 创建 Pull Request

### 可能的改进方向
- 添加真实的 SHA-256 哈希算法
- 支持更多的可视化布局
- 添加数据导入/导出功能
- 实现撤销/重做操作
- 添加性能监控面板

## 📄 许可证

MIT License - 详见 LICENSE 文件

---

**享受探索 Merkle Tree 的乐趣！** 🌳✨ 